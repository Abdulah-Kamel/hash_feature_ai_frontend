## هدف الصفحة
- إنشاء صفحة جديدة داخل `dashboard` تتكون من قسمين، نبدأ بتنفيذ قسم الدردشة بشكل مطابق للتصميم (pixel-perfect) وقابل للصيانة.

## بنية الصفحة والمسار
- مسار جديد: `src/app/dashboard/chat/page.js` يعتمد على `SidebarProvider` الموجود في `src/app/dashboard/layout.js`.
- تقسيم أفقي:
  - العمود الأيسر (المحتوى العام/التبويبات) نؤجله للمرحلة التالية.
  - العمود الأوسط: الدردشة (ننفذها الآن).
  - العمود الأيمن (الشريط الجانبي للمصادر/الملف الشخصي) نؤجله للمرحلة التالية.

## مكونات قسم الدردشة
- `ChatLayout` (حاوية): مسؤولة عن الهيكل العام، ترويسة الشات، منطقة الرسائل، وأدوات الإدخال.
- `ChatHeader`:
  - يحتوي عنوان «الشات»، زر خيارات (أيقونة `MoreHorizontal`) وفق التصميم، وكتلة الحالة (مثل الوقت/القفل إن لزم).
- `ChatThread`:
  - قائمة رسائل داخل `Card` بعرض ثابت وحدود دائرية.
  - يدعم التمرير مع `overflow-auto`، والتمركز على الرسالة الأخيرة.
- `ChatMessage`:
  - فقاعات الرسائل يمين/يسار بحسب المرسل.
  - `avatar` دائري مع الأحرف «SL» للرسائل الواردة.
  - محتوى الرسالة متعدد الأسطر، مع نقاط مرقّمة، مطابقة للألوان `bg-card`, `text-foreground`.
  - `MessageMeta`: وقت الرسالة، مؤشرات التسليم (أيقونة `Check`)، قائمة الخيارات.
- `ChatInput`:
  - حقل إدخال placeholder «اكتب هنا».
  - أزرار الإجراءات: «ارسال» (أساسي `bg-primary`)، أزرار ثانوية مستديرة للأدوات (أيقونات كمشبك/ميكروفون) حسب التصميم.

## المكتبات والعناصر المستعملة
- مكوّنات shadcn الموجودة: `card`, `button`, `input`, `avatar`, `dropdown-menu`, `tooltip`.
- أيقونات `lucide-react` المتاحة حاليًا: `MoreHorizontal`, `PaperPlaneRight`, `Lock`, `Check`, `MessageSquare`, إلخ.
- ألوان وأشعة الزوايا من `src/app/globals.css` لضمان التوافق البصري.

## التصميم (Pixel-Perfect)
- ارتفاع منطقة الدردشة مضبوط بحيث يتطابق مع اللقطة: استخدام `min-h-[calc(100vh-...)]` مع padding مطابق لمقياس Tailwind.
- خلفيات:
  - الحاوية: `bg-background`.
  - الفقاعات الواردة: `bg-card`، الفقاعات المرسلة: `bg-primary` مع `text-primary-foreground`.
- الحواف:
  - `rounded-2xl` للحاويات، `rounded-2xl`/`rounded-lg` للفقاعات.
- تباعد:
  - استخدام `gap-4` و`px-4 py-3` على الرسائل، و`space-y-3` بين الرسائل.
- اتجاه RTL مفعّل تلقائيًا عبر `src/app/layout.js`.

## منطق وتفاعلات
- حالة React:
  - `messages`: مصفوفة رسائل أولية لمحاكاة محتوى اللقطة.
  - `input`: نص الإدخال.
- وظائف:
  - `handleSend()`: إضافة رسالة جديدة من المستخدم، تحريك التمرير إلى الأسفل.
  - `scrollToBottom` باستخدام `ref` على `ChatThread`.
- إمكانية التوسع لاحقًا لربط API عبر `onSend(text)` أو `useChat`.

## هيكلة الملفات
- `src/components/chat/ChatLayout.jsx`
- `src/components/chat/ChatHeader.jsx`
- `src/components/chat/ChatThread.jsx`
- `src/components/chat/ChatMessage.jsx`
- `src/components/chat/ChatInput.jsx`
- `src/app/dashboard/chat/page.js` يستورد المكونات وينسّق الأعمدة.

## قابلية الصيانة
- فصل العرض عن المنطق: المكونات «عرضية» تستقبل props فقط، والمنطق في `page.js` أو hook مستقل.
- أسماء أصناف Tailwind محدودة ومغلفة عبر `cn()` حيث يلزم.
- لا مكتبات إضافية؛ كل شيء يعتمد على الاعتمادات الحالية.

## خطوات التنفيذ
1. إنشاء المجلد `src/components/chat/` وبناء المكونات المذكورة مع props واضحة.
2. إضافة صفحة `src/app/dashboard/chat/page.js` وتكوين الأعمدة، واستدعاء `SidebarInset` من تخطيط لوحة التحكم.
3. إدراج بيانات رسائل ثابتة مطابقة للصورة (Hello/تلخيص/فقرة متعددة نقاط).
4. ضبط الألوان والحواف والتباعد وفق متغيرات `globals.css` لضمان المطابقة.
5. اختبار الاستجابة والتمرير، وضبط RTL وتراصف الأيقونات.
6. تشغيل `npm run dev` والتحقق من الواجهة.

## لاحقًا
- تنفيذ العمود الأيسر (التبويبات «الاختبارات/كروت/المراحل» وزر «إنشاء مراحل»).
- تنفيذ العمود الأيمن (قائمة المصادر، إضافة ملف جديد، معلومات المستخدم).
- ربط `handleSend` بـ API وإظهار حالة الكتابة/التسليم.

> عند الموافقة سأباشر بإنشاء المكونات والصفحة وتشغيل المعاينة لضمان الدقة البصرية والتفاعل.